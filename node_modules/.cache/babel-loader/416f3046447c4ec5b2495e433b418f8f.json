{"ast":null,"code":"import HelloWorld from '../components/HelloWorld';\nimport axios from 'axios';\nexport default {\n  name: 'HomeView',\n  components: {\n    HelloWorld\n  },\n\n  data() {\n    return {\n      student: {},\n      id: '',\n      sub: '',\n      crdts: '',\n      tchr: '',\n      isEdit: false,\n      list: [],\n      row: '',\n      name: localStorage.getItem(\"userMail\"),\n      usrName: ''\n    };\n  },\n\n  mounted() {\n    if (!this.name) {\n      this.$router.push({\n        path: '/'\n      });\n    } else {\n      this.usrName = this.name.slice(0, this.name.indexOf('@')), axios.get('http://127.0.0.1:3333/class/').then(response => {\n        this.list = response.data;\n      });\n    }\n  },\n\n  methods: {\n    getData() {\n      axios.get('http://127.0.0.1:3333/class/').then(response => {\n        this.list = response.data;\n      });\n    },\n\n    submitData() {\n      axios.post(\"http://127.0.0.1:3333/class/\", {\n        subject: this.sub,\n        credits: this.crdts,\n        teacher: this.tchr\n      }).then(response => {\n        console.log(response.data);\n        this.sub = \"\";\n        this.crdts = \"\";\n        this.tchr = \"\";\n        this.getData();\n      });\n    },\n\n    deleteData(id) {\n      console.log(\"delete\");\n      axios.delete('http://127.0.0.1:3333/class/' + this.list[id].class_id);\n    },\n\n    editData(id) {\n      console.log(\"edit\");\n      this.classid = this.list[id].class_id;\n      this.sub = this.list[id].subject;\n      this.crdts = this.list[id].credits;\n      this.tchr = this.list[id].teacher;\n      this.row = id;\n      this.isEdit = true;\n    },\n\n    updateClass() {\n      let updateData = {};\n      updateData.id = this.classid;\n\n      if (this.list[this.row].subject != this.sub) {\n        updateData.subject = this.sub;\n      }\n\n      if (this.list[this.row].credits != this.crdts) {\n        updateData.credits = this.crdts;\n      }\n\n      if (this.list[this.row].teacher != this.tchr) {\n        updateData.teacher = this.tchr;\n      }\n\n      console.log(updateData);\n      axios.patch('http://127.0.0.1:3333/class/', updateData).then(response => {\n        console.log(response.data);\n        this.getData();\n      });\n      this.isEdit = false;\n      this.sub = \"\";\n      this.crdts = \"\";\n      this.tchr = \"\";\n    },\n\n    logout() {\n      this.$router.push({\n        path: \"/\"\n      });\n      localStorage.clear();\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAkJA;AACA;AAEA;EACAA,gBADA;EAGAC;IACAC;EADA,CAHA;;EAMAC;IACA;MACAC,WADA;MAEAC,MAFA;MAGAC,OAHA;MAIAC,SAJA;MAKAC,QALA;MAMAC,aANA;MAOAC,QAPA;MAQAC,OARA;MASAX,sCATA;MAUAY;IAVA;EAYA,CAnBA;;EAqBAC;IACA;MACA;QAAAC;MAAA;IACA,CAFA,MAGA;MACA,2DAEAC,0CACAC,IADA,CACAC;QACA;MACA,CAHA,CAFA;IAMA;EACA,CAjCA;;EAmCAC;IAEAC,UACA;MACAJ,0CACAC,IADA,CACAC;QACA;MACA,CAHA;IAIA,CARA;;IAUAG;MACAL,MACAM,IADA,CACA,8BADA,EACA;QACAC,iBADA;QAEAC,mBAFA;QAGAC;MAHA,CADA,EAMAR,IANA,CAMAC;QACAQ;QACA;QACA;QACA;QACA;MACA,CAZA;IAcA,CAzBA;;IA2BAC;MACAD;MACAV;IACA,CA9BA;;IAgCAY;MACAF;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CAxCA;;IA0CAG;MACA;MACAC;;MACA;QACAA;MACA;;MACA;QACAA;MACA;;MACA;QACAA;MACA;;MACAJ;MACAV,wDACAC,IADA,CACAC;QACAQ;QACA;MACA,CAJA;MAKA;MACA;MACA;MACA;IACA,CAhEA;;IAkEAK;MACA;QAAAhB;MAAA;MACAiB;IACA;;EArEA;AAnCA","names":["name","components","HelloWorld","data","student","id","sub","crdts","tchr","isEdit","list","row","usrName","mounted","path","axios","then","response","methods","getData","submitData","post","subject","credits","teacher","console","deleteData","editData","updateClass","updateData","logout","localStorage"],"sourceRoot":"src/views","sources":["HomeView.vue"],"sourcesContent":["<template>\n  <div>\n    \n    \n    <v-row>\n      <v-col>\n         <v-row class=\"pa-4\">\n            <v-col>\n              <h2>Hi {{this.usrName}}</h2>\n              <v-btn\n              x-small\n              color=\"grey\"\n              @click=\"logout\"\n              >\n              Logout\n              </v-btn>\n            </v-col>\n          </v-row>\n      </v-col>\n      <v-col>\n        <v-card\n          class=\"mt-16 ml-10 mx-auto\"\n          width=\"300\"\n          height=\"400\"\n          outlined\n          elevation=\"5\"\n          color=\"grey lighten-4\"\n          >\n            <v-col class=\"div1\">\n            \n              <v-text-field\n                value=\"\"\n                v-model=\"sub\"\n                label=\"Subject\"\n                counter\n                maxlength=\"30\"\n                outlined\n              ></v-text-field>\n\n              <v-text-field\n                value=\"\"\n                v-model=\"crdts\"\n                label=\"Credits\"\n                counter\n                maxlength=\"50\"\n                outlined\n              ></v-text-field>\n\n              <v-text-field\n                value=\"\"\n                v-model=\"tchr\"\n                label=\"Teacher\"\n                counter\n                maxlength=\"50\"\n                outlined\n              ></v-text-field>\n\n            </v-col>\n\n          <v-row>\n            <v-col></v-col>\n            <v-col>\n              <v-btn v-if=\"!isEdit\" color =\"green\" @click=\"submitData\">SUBMIT</v-btn>\n              <v-btn v-else color =\"blue\" @click=\"updateClass\">UPDATE</v-btn>\n            </v-col>\n            <v-col></v-col>\n\n          </v-row>\n        </v-card>     \n        </v-col>\n      <v-col cols=\"5\">\n        <v-simple-table class=\"table1\">\n            <template v-slot:default>\n             \n                <thead>\n                  <tr>\n                    <th class=\"text-left\">\n                      class_id\n                    </th>\n                    <th class=\"text-left\">\n                      Subject\n                    </th>\n                    <th class=\"text-left\">\n                      Credits\n                    </th>\n                    <th class=\"text-left\">\n                      Teacher\n                    </th>\n                    <th class=\"text-center\" colspan=\"2\">\n                      Action\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"(item, index) in list\" v-bind:key=\"item.class_id\">\n                    <td>{{ item.class_id }}</td>\n                    <td>{{ item.subject }}</td>\n                    <td>{{ item.credits }}</td>\n                    <td>{{ item.teacher }}</td>\n                    <td>\n                      <v-btn\n                        class=\"mx-2\"\n                        fab\n                        dark\n                        x-small\n                        color=\"cyan\"\n                        @click=\" editData(index)\"\n                      >\n                        <v-icon dark>\n                          mdi-pencil\n                        </v-icon>\n                      </v-btn>\n                      \n                      <v-btn\n                        class=\"mx-2\"\n                        fab\n                        dark\n                        x-small\n                        color=\"black\"\n                        @click=\"deleteData(index)\"\n                      >\n                      </v-btn>\n                        <v-icon dark\n                          color=\"black\"\n                          @click=\"deleteData(index)\">\n                          mdi-trash-can\n                        </v-icon>\n                    </td>\n                  </tr>\n                </tbody>\n              \n            </template>\n        </v-simple-table>\n      <HelloWorld />\n      </v-col>\n      <v-col></v-col>\n\n    </v-row>\n   \n   \n  </div> \n</template>\n\n\n<script>\n  \n  import HelloWorld from '../components/HelloWorld'\n  import axios from 'axios'\n\n  export default {\n    name: 'HomeView',\n\n    components: {\n      HelloWorld,\n    },\n    data () {\n      return {\n        student:{},\n        id:'',\n        sub:'',\n        crdts:'',\n        tchr:'',\n        isEdit:false,\n        list: [],\n        row:'',\n        name:localStorage.getItem(\"userMail\"),\n        usrName:''\n      } \n    },\n    \n    mounted(){\n      if(!this.name){\n        this.$router.push({path:'/'})\n      }\n      else{\n        this.usrName = this.name.slice(0,this.name.indexOf('@')),\n\n        axios.get('http://127.0.0.1:3333/class/')\n        .then((response) => {\n        this.list=response.data\n        })\n      }\n    },\n\n    methods: {\n\n      getData()\n      {\n        axios.get('http://127.0.0.1:3333/class/')\n        .then((response) => {\n        this.list=response.data\n        })\n      },\n        \n      submitData() {\n      axios\n        .post(\"http://127.0.0.1:3333/class/\", {\n          subject: this.sub,\n          credits: this.crdts,\n          teacher: this.tchr,\n        })\n        .then((response) => {\n          console.log(response.data);\n          this.sub = \"\";\n          this.crdts = \"\";\n          this.tchr = \"\";\n          this.getData()\n        });\n        \n      },\n\n      deleteData(id) {\n      console.log(\"delete\")\n        axios.delete('http://127.0.0.1:3333/class/'+this.list[id].class_id)\n      },\n\n      editData(id){\n        console.log(\"edit\")\n        this.classid = this.list[id].class_id\n        this.sub = this.list[id].subject\n        this.crdts = this.list[id].credits\n        this.tchr = this.list[id].teacher\n        this.row=id\n        this.isEdit=true\n      },\n\n      updateClass(){\n      let updateData = {}\n      updateData.id = this.classid\n      if(this.list[this.row].subject!= this.sub){\n        updateData.subject = this.sub\n      }\n      if(this.list[this.row].credits!= this.crdts){\n        updateData.credits = this.crdts\n      }\n      if(this.list[this.row].teacher!= this.tchr){\n        updateData.teacher = this.tchr\n      }\n      console.log(updateData);\n      axios.patch('http://127.0.0.1:3333/class/',updateData)\n      .then((response) => {\n        console.log(response.data)\n        this.getData()\n      })\n      this.isEdit=false\n      this.sub = \"\"\n      this.crdts = \"\"\n      this.tchr = \"\"\n    },\n\n    logout() {\n        this.$router.push({ path: \"/\" });\n        localStorage.clear()\n    }\n  \n    }\n  }\n\n</script>\n\n\n<style>\ntable, th, td{\n  border: 2px solid black;\n  border-collapse: collapse\n}\n  .table1 {\n    width:auto;\n    height:auto;\n    margin:20px;\n    padding: 10px;\n  }\n\n</style>"]},"metadata":{},"sourceType":"module"}